# 函数调用

- 函数是 GO 语言中的一等公民；

## 反射

- 反射是 Go 语言比较重要的一个特性之一，虽然在大多数的应用和服务中并不常见，但是很多框架都依赖 Go 语言的反射机制实现一些动态的功能。
- reflect 实现了运行时的反射能力，能够让 Golang 的程序操作不同类型的对象，我们可以使用包中的函数 TypeOf 从静态类型 interface{} 中获取动态类型信息并通过 ValueOf 获取数据的运行时表示，通过这两个函数和包中的其他工具我们就可以得到更强大的表达能力。
- 反射包中 Value 的类型与 Type 不同，Type 是一个接口类型，但是 Value 在 `reflect` 中的定义是一个结构体，这个结构体没有任何对外暴露的成员变量，但是却提供了很多方法让我们读取或者写入 Value 结构体中存储的数据；
- 反射包中的所有方法基本都是围绕着 Type 和 Value 这两个对外暴露的类型设计的，我们通过 TypeOf、ValueOf 就可以将一个普通的变量转换成“反射”包中提供的 Type 和 Value，使用反射提供的方法对这些类型进行复杂的操作。
  
## 反射法则

- 运行时反射是程序在运行期间检查其自身结构的一种方式，它是元编程的一种，但是它带来的灵活性也是一把双刃剑，过量的使用反射会使我们的程序逻辑变得难以理解并且运行缓慢。

- 第一法则
  - 反射的第一条法则就是，我们能够将 Go 语言中的接口类型变量转换为反射对象，`reflect.TypeOf` 和 `reflect.ValueOf` 就是完成这个转换的两个重要方法。
- 第二法则
  - 反射的第二法则就是，我们能够使用 `reflect` 中的 `Interface` 方法将反射对象还原成接口类型的变量。
  - `v := reflect.ValueOf(1) v.Interface{}.(int)`
- 第三法则
  - 想要修改原有的变量我们只能通过 `reflect.ValueOf` 获取变量指针，然后通过 `Elem` 方法获取指针指向的变量并调用 `SetInt` 方法更新变量的值